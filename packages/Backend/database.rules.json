{
  "rules": {
    "journals": {
      "$journal": {
        "history": {
          ".read": "auth != null",
          "$revision": {
            ".write": "((data.parent().parent().child('phase').val() === 'create' && auth.token.author === true) || (data.parent().parent().child('phase').val() === 'edit' && auth.token.editor === true)) && !data.exists() && newData.child('a').val() === auth.uid"
          }
        },
        "users": {
          ".read": "auth != null",
          "$userid": {
            ".write": "$userid === auth.uid"
          }
        },
        "checkpoint": {
          ".read": "auth != null",
          ".write": "((data.parent().child('phase').val() === 'create' && auth.token.author === true) || (data.parent().child('phase').val() === 'edit' && auth.token.editor === true)) && newData.child('a').val() === auth.uid && data.parent().child('history').child(newData.child('id').val()).child('a').val() === auth.uid"
        },
        "phase": {
          ".read": "auth != null",
          ".write": "!data.exists() && auth.token.author === true && newData.val() === 'create'"
        },
        "title": {
          ".read": "auth != null",
          ".write": "(data.parent().child('phase').val() === 'create' && auth.token.author === true) || (data.parent().child('phase').val() === 'edit' && auth.token.editor === true)"
        }
      }
    }
  }
}
